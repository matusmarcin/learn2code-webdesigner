<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>js chase</title>
  <style>
  div {
    position: absolute;
    background-color: #abc;
    left: 50px;
    width: 70px;
    height: 70px;
    margin: 5px;
    font-size: 2em;
    padding: 15px;
    color: #eee;
  }
  #p2 {
  	background-color: orange;
  	left: 300px;
  }
  </style>
  <script src="jquery.min.js"></script>
</head>
<body>

<div class="block player" id="p1">1</div>
<div class="block player" id="p2">2</div>
 
<script>
(function($) {
	var $p1 = $('#p1');
	var $p2 = $('#p2');
	var movement = movement;

	$(document).keydown(function(event) {
		if(event.keyCode >= 37 && event.keyCode <= 40) {
			$p1.change();
			if(event.keyCode == 37) { // left
				$p1.animate({ "left": "-=50px" }, movement );
			} else if(event.keyCode == 38) { // up
				$p1.animate({ "top": "-=50px" }, movement );
			} else if(event.keyCode == 39) { // right
				$p1.animate({ "left": "+=50px" }, movement );
			} else if(event.keyCode == 40) { // down
				$p1.animate({ "top": "+=50px" }, movement );
			}
		}

		if(event.keyCode == 65 || event.keyCode == 68 || event.keyCode == 83 || event.keyCode == 87) {
			$p2.change();
			if(event.keyCode == 65) { // left
				$p2.animate({ "left": "-=50px" }, movement );
			} else if(event.keyCode == 87) { // up
				$p2.animate({ "top": "-=50px" }, movement );
			} else if(event.keyCode == 68) { // right
				$p2.animate({ "left": "+=50px" }, movement );
			} else if(event.keyCode == 83) { // down
				$p2.animate({ "top": "+=50px" }, movement );
			}
		}
	});

	$('.player').on('change', function() {
		// console.log('change ' + $(this).text());
		console.log($(this).isOnScreen());
	})

	$.fn.isOnScreen = function(){
	    var viewport = {};
	    viewport.top = $(window).scrollTop();
	    viewport.bottom = viewport.top + $(window).height();
	    var bounds = {};
	    bounds.top = this.offset().top;
	    bounds.bottom = bounds.top + this.outerHeight();
	    return ((bounds.top <= viewport.bottom) && (bounds.bottom >= viewport.top));
	};
 
})(jQuery);
// $( "#left" ).click(function(){
//   $( ".block" ).animate({ "left": "-=50px" }, "slow" );
// });
</script>
 
</body>
</html>